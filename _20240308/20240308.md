---
title: 並列処理について
tags:
  - research
  - OS
  - architecture
---

## はじめに

プロセス -> カーネルに処理が移行するタイミングの仕組みをどのように実現しているのか気になったので調査した。

この疑問の重要点は **どのようにして実行ファイルに存在しない処理 (CPU の命令) を埋め込んでいるか** である。

## 予想

1. CPU の割り込みを利用する
    - CPU の様々な機能を利用するには、レジスタに特定の値をセットする
    - スケジューラがプロセスを再開する時に、次のプロセスが一定期間実行されたら特定の命令(カーネルの処理を再開できるような命令)を実行するようにレジスタをいじる
2. コンパイル時に決定する
    - コンパイル時には、どの CPU アーキテクチャか、どの OS か、そもそも OS を使うかなどを決める。
    - その段階で、ソースコードにはない特定の命令(カーネルの処理を再開できるような命令)を加える。
    - こちらの方法の方が安全性の観点から実現性は低い気がする
        - コンパイルした人がプロセスの実行時間を変えられる可能性がある
        - OS の仕組みの一部がコンパイラに依存するのはよくない

## 